# ======================
# API runtime & engine
# ======================
TRYON_ENGINE=stableviton
TRYON_MODEL_VERSION=v1

# ======================
# Paths inside container
# ======================
TRYON_OUTPUTS_DIR=/app/api/outputs
TRYON_UPLOADS_DIR=/app/api/uploads
TRYON_CACHE_DIR=/app/api/.cache
TRYON_LOG_DIR=/app/api/.logs
TRYON_MODELS_DIR=/models

# Build/runtime toggles for dependency/model handling
# If true, install ML deps (torch, diffusers, etc.) during image build.
INSTALL_ML_DEPS=true
# Avoid model downloads during build; let the container check/download at start.
DOWNLOAD_MODELS=0
# At container start, check/download only missing models into the mounted ./models volume.
DOWNLOAD_MODELS_ON_START=1

# ======================
# Model locations (dirs/files the adapters read)
# ======================
STABLEVITON_CKPT_DIR=/models/stableviton
CONTROLNET_OPENPOSE_DIR=/models/controlnet/openpose
INSTANTID_DIR=/models/instantid
SCHP_WEIGHTS=/models/schp/schp.pth

# ======================
# Auto-download URLs (used by scripts/download_models.py)
# If you mount files manually, you can leave these set or blank.
# ======================
# Official StableVITON ckpts (SharePoint; requires access)
STABLEVITON_SHAREPOINT_URL=https://kaistackr-my.sharepoint.com/:f:/g/personal/rlawjdghek_kaist_ac_kr/EjzAZHJu9MlEoKIxG4tqPr0BM_Ry20NHyNw5Sic2vItxiA?e=5mGa1c
# ControlNet OpenPose (SD1.5)
CONTROLNET_OPENPOSE_URL=https://huggingface.co/lllyasviel/control_v11p_sd15_openpose/resolve/main/diffusion_pytorch_model.safetensors
# SCHP (LIP) human parsing weights
SCHP_DRIVE_URL=https://huggingface.co/levihsu/OOTDiffusion/resolve/main/checkpoints/humanparsing/exp-schp-201908261155-lip.pth
# InstantID / InsightFace antelopev2 backbone
INSTANTID_ANTELOPE_URL=https://sourceforge.net/projects/insightface.mirror/files/v0.7/antelopev2.zip/download

# ======================
# Hugging Face / gated pulls (optional)
# ======================
HUGGINGFACE_HUB_TOKEN=

# ======================
# Inference knobs
# ======================
TRYON_USE_FP16=1
TRYON_MAX_RES=768
NUM_TRYON_FRAMES=5

# ======================
# CORS / security (tune for prod)
# ======================
TRYON_CORS_ORIGINS=*

# ======================
# Sizing (no SMPL-X needed)
# ======================
SIZING_MODE=rules
SIZING_BRAND_TABLE_DIR=/models/sizing/brand_charts
SIZING_PRIORS_CSV=/models/sizing/anthro_priors.csv
SIZING_FIT_TOLERANCES=/models/sizing/fit_tolerances.yaml
SIZING_KEYPOINT_NUDGE_MAX_CM=2.0

# ======================
# GPU
# ======================
NVIDIA_VISIBLE_DEVICES=all
NVIDIA_DRIVER_CAPABILITIES=compute,utility

# GPU-ready base image for faster ML setups (can be overridden per build)
BASE_IMAGE=pytorch/pytorch:2.3.1-cuda12.1-cudnn8-runtime

# Optionally check/download models on container start (idempotent)
DOWNLOAD_MODELS_ON_START=0
